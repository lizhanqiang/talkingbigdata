> **OAuth 2.0**授权框架允许**第三方应用程序**在**资源拥有者**明确授权的情况下代表资源拥有者或者以其自身的名义获得对HTTP服务的有限访问权限
>
> `RFC6749`



相信很多人都玩过QQ空间，QQ空间的相册中存储了大量的图片，假如有一个第三方网站**云Q冲印**支持打印QQ空间相册中的图片。为了让**云Q冲印**能够访问到用户QQ空间相册，传统的授权方式非常简单粗暴-直接将用户名/密码告诉**云Q冲印**。这种方式有如下弊端

>1. 云Q冲印为了后续方便，很可能会以明文的形式存储用户的QQ空间的用户名和密码
>2. QQ空间需要支持用户名/密码登录方式，尽管这种方式不太安全。如果QQ空间新增了双因子认证，云Q冲印将会登录失败
>3. 云Q冲印登录后，可以访问用户的一切资源（日志、留言板、说说），用户无法限制其访问范围和时长
>4. 用户如果要收回对云Q冲印的授权，只能修改密码，而一旦修改密码，所有通过这种方式授权的第三方应用程序都将受到影响
>5. 一旦某个第三方应用程序被攻破，用户名密码就可能被泄露



OAuth 2.0中定义了如下几种角色

>1. 资源拥有者/用户（Resource Owner）
>   资源的所有者，QQ空间的注册用户
>2. 资源服务器（Resource Server）
>   保存用户资源的服务器，QQ空间服务器
>3. 第三方应用程序/客户端（Client）
>   需要访问用户资源的第三方，云Q冲印
>4. 授权服务器（Authorization Server）
>   用户授权后，给第三方应用程序颁发访问令牌。授权服务器跟资源服务器可以是同一台
>
>



OAuth 2.0中，第三方应用程序（Client）首先向用户（Resource Owner）索要明确授权，用户对第三方应用程序授权时，可以指定其可访问的资源范围（Scope），用户同意授权之后，授权服务器（Authorization Server）向第三方应用程序（Client）颁发访问令牌（Access Token），之后第三方应用程序携带访问令牌（Access Token）可访问授权范围的用户资源



授权类型：

>1. 授权码许可类型
>   最安全的授权类型，通过授权码code换取access_token
>2. 资源拥有者凭据许可类型
>   如果软件是官方出品的，又要使用OAuth 2.0来保护Web API（输入一次用户名密码换取token，不用每次都输入用户名密码）。通过资源拥有者的用户名和密码换取token，grant_type=password
>3. 客户端凭据许可
>   没有明确的资源拥有者（或者三方应用访问的信息不属于任何用户），如访问系统的logo等信息，第三方软件直接使用app_id和app_secret换取token。这种方式第三方软件的后端服务可以随时发起access_token的请求，所以这种授权许可不需要refresh_token。grant_type=client_credentials
>4. 隐式许可类型
>   嵌入到浏览器端的应用且没有服务端，使用app_id换取token，不需要app_secret，没有refresh_token，通过app_idresponse_type=token